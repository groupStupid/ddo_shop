<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
 "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team_stupid.mapper.AccountMapper">
 	 <select id="loadUserByUsername" resultType="CustomUserDetails">
		SELECT ACC_USERID, ACC_USERPW FROM ACCOUNT 
		WHERE ACC_USERID = #{id}
	</select>
	
	<select id="selectUserIdDistinct" resultType="int">
		SELECT count(*)
		FROM ACCOUNT
		where ACC_USERID = #{id}
	</select>
	
	<select id="selectNicknameDistinct" resultType="int">
		SELECT count(*)
		FROM ACCOUNT
		where ACC_NICKNAME = #{nickname}
	</select>
	
	<insert id="register" parameterType="map">
		INSERT INTO ACCOUNT
		VALUES (
		(SELECT NVL(MAX(ACC_NUM),0)+1 from ACCOUNT A),
		 #{userid}, #{password}, #{email}, #{nickname}, #{category})
	</insert>
	
	<select id="FoundUserId" resultType="String">
 		SELECT ACC_USERID
		FROM ACCOUNT
		where ACC_EMAIL = #{email}
	</select>
	
	<select id="selectUserPw" resultType="int">
 		SELECT COUNT(*)
		FROM ACCOUNT
		where ACC_USERID = #{userid} and ACC_EMAIL = #{email}
	</select>
	
	<update id="updateTempUserPw">
		UPDATE ACCOUNT
		SET ACC_USERPW = #{tempPw}
		WHERE ACC_USERID = #{userid}
	</update>
	
	<select id="getNicknameById" resultType="String">
 		SELECT ACC_NICKNAME
 		FROM ACCOUNT
 		WHERE ACC_USERID = #{userid}
	</select>
	
	<select id="getEmailCount" resultType="int">
		SELECT COUNT(*) FROM ACCOUNT WHERE ACC_EMAIL = #{email} 
	</select>
	
	<update id="changePw">
		UPDATE ACCOUNT
		SET ACC_USERPW = #{pw}
		WHERE ACC_USERID = #{userid}
	</update>
	
	<select id="getUserIds" resultType="java.lang.String">
		SELECT ACC_USERID
		FROM ACCOUNT;
	</select>
	
<!-- 	 <select id="list" resultType="BoardVO">
		SELECT EVENT_NUM,
		 EVENT_TITLE,
		  EVENT_CONTENTS,
		   EVENT_GOODS,
		    EVENT_START,
		     EVENT_END,
		      EVENT_ONGOING,
		       EVENT_IMAGEURL,
		        EVENT_EMOTIONS
		         FROM EVENT_BOARD order by EVENT_NUM DESC;
		SELECT * FROM EVENT_BOARD order by EVENT_NUM DESC
	</select>

	<select id="getCount" resultType="int">
		SELECT COUNT(EVENT_NUM) FROM EVENT_BOARD
	</select>
    
    <select id="searchItem" resultType="BoardVO">
    	SELECT * FROM EVENT_BOARD WHERE EVENT_NUM = #{num}
    </select>
    
    <insert id="write" parameterType="hashMap">
    	INSERT INTO
    	EVENT_BOARD(EVENT_NUM, EVENT_TITLE, EVENT_CONTENTS)
    	values(#{EVENT_NUM}, #{EVENT_TITLE}, #{EVENT_CONTENTS})
    </insert>
    
    <select id="search_image" resultType="string">
    	select recycle_contents
		from RECYCLE_INFO
		where recycle_title = #{recycle_title}
    </select>
    
    <select id="deleteboard" >
    	delete from EVENT_BOARD
		where EVENT_NUM = #{event_num}
    </select> -->
</mapper>